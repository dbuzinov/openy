services:
  ymca_google.pusher:
    class: Drupal\ymca_google\GooglePush
    arguments: ['@ymca_google.groupex_wrapper', '@config.factory', '@logger.factory', '@entity_type.manager', '@ymca_google.drupal_proxy', '@entity.query']
  ymca_google.groupex_wrapper:
    class: Drupal\ymca_google\GcalGroupexWrapper
    arguments: ['@state', '@logger.factory']
  ymca_google.data_fetcher:
    class: Drupal\ymca_google\GroupexDataFetcher
    arguments: ['@ymca_google.groupex_wrapper']
    properties:
      debug: false
  ymca_google.drupal_proxy:
    class: Drupal\ymca_google\DrupalProxy
    arguments: ['@ymca_google.groupex_wrapper', '@entity.query', '@logger.factory', '@ymca_google.data_fetcher']
  ymca_google.syncer:
    class: Drupal\ymca_sync\Syncer
    arguments: ['@ymca_google.groupex_wrapper']
    calls:
      - [addStep, ['@ymca_google.data_fetcher', 'fetch']]
      - [addStep, ['@ymca_google.drupal_proxy', 'saveEntities']]
      - [addStep, ['@ymca_google.pusher', 'proceed']]
    tags:
      - { name: syncer }
