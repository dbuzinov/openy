<div id="component_$component_id" type="$component_type">
	[[ if groupex_error ]]
	<p>
		Group exercise search is unavailable at this time.  Please try again later.
	</p>
	[[ end if groupex_error ]]
	[[ if ! groupex_error ]]

	[[ if ! schedule_results ]]
		<!-- Sorry, no classes matching the search were found. -->
	[[ end if schedule_results ]]
	
	[[ if ! groupex_searched ]]
	
	[[ end if groupex_searched ]]

	[[ end if groupex_error ]]

	
	[[ if ! groupex_error ]]
	<form name="groupex_search_$component_id" id="groupex_search_$component_id" method="get" class="group-ex search" action="$target_url">
		$preview_hidden_form_inputs
		[[ if location_mode_fixed ]]
		<input type="hidden" name="location" value="$location_value"/>
		[[ end if location_mode_fixed ]]
		 [[ if category_mode_fixed ]]
		<input type="hidden" name="category" value="$category_value"/>
		[[ end if category_mode_fixed ]] 
		[[ if class_name_mode_fixed ]]
		<input type="hidden" name="class" value="$class_name_value"/>
		[[ end if class_name_mode_fixed ]]

		<fieldset>
			
			[[ if location_mode_user_selectable ]]
			<label class="control-label">
				Location
				<small>(optional&mdash;select up to 4 )</small>
			</label>
			<div id="group-ex-locations">
				<div class="panel panel-default content-expander">
					<div class="panel-heading">
						<div class="panel-title">
						<a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#group-ex-locations" href="#collapse-locations">
						<h4>
							Locations
						</h4>
						</a>
						</div>
					</div>
					<div id="collapse-locations" class="panel-collapse collapse">
						<div class="row">
						<div class="panel-body">
							<div class="group-ex-locations" id="group-ex-locations">
								$start_loop_locations
								<div class="form-group" data-toggle="buttons">
									<label class="control-label btn-block btn btn-default [[ if location_$id\_checked ]] active[[ end if location_$id\_checked ]]" for="location_$id" title="$name_esc">
										<input type="checkbox" name="location[]" id="location_$id" value="$id" $location_$id\_checked />
										<span class="glyphicon glyphicon-[[ if location_$id\_checked ]]check[[ end if location_$id\_checked ]][[ if ! location_$id\_checked ]]unchecked[[ end if location_$id\_checked ]] hidden-xs"></span>
										$name_esc
									</label>
								</div>
								$end_loop_locations
							</div>
						</div>
						</div>
					</div>
				</div>
			</div>
			[[ end if location_mode_user_selectable ]]
			[[ if class_name_mode_user_selectable ]]
			<div class="form-group group-ex-types">
				<label class="select" for="groupex_search_class_$component_id">Class Name <small>(optional)</small></label>
				<select name="class" id="groupex_search_class_$component_id" onchange="c_$component_id\_classname_onchange()" class="form-control">
					<option value="any" $class_any_selected>(all)</option>
					$start_loop_classes
					<option value="$id" $class_$id\_selected>$title_esc</option>
					$end_loop_classes
				</select>
			</div>
			[[ end if class_name_mode_user_selectable ]]
			[[ if category_mode_user_selectable ]]
			<div class="form-group group-ex-types">
				<label class="control-label $category_style" for="groupex_search_category_$component_id">Category <small>(optional)</small></label>
				<select id="groupex_search_category_$component_id" name="category" class="form-control">
					<option value="any" $category_any_selected>(all)</option>
					$start_loop_categories
					<option value="$id" $category_$id\_selected>$name_esc</option>
					$end_loop_categories
				</select>
			</div>
			[[ end if category_mode_user_selectable ]]
			
			<div class="form-group group-ex-time-of-day">
				<label class="control-label">
					Time of Day
					<small>(optional)</small>
				</label>
				<div class="group-ex-time form-group">
					<div class="btn-checkbox" data-toggle="buttons">
						<label for="time_of_day_morning" class="btn btn-default btn-block control-label [[ if time_of_day_morning_checked ]]active[[ end if time_of_day_morning_checked ]]" >
							<span class="glyphicon glyphicon-[[ if location_$id\_checked ]]check[[ end if location_$id\_checked ]][[ if ! location_$id\_checked ]]unchecked[[ end if location_$id\_checked ]] hidden-xs	"></span>
							<input type="checkbox" id="time_of_day_morning" name="time_of_day[]" value="morning" $time_of_day_morning_checked>
							Morning
							<small>(6 a.m. - 12 p.m.)</small>
						</label>
					</div>
					<div class="btn-checkbox" data-toggle="buttons">
						<label for="time_of_day_morning" class="btn btn-default btn-block control-label [[ if time_of_day_afternoon_checked ]]active[[ end if time_of_day_afternoon_checked ]]" >
							<span class="glyphicon glyphicon-[[ if location_$id\_checked ]]check[[ end if location_$id\_checked ]][[ if ! location_$id\_checked ]]unchecked[[ end if location_$id\_checked ]] hidden-xs"></span>
							<input type="checkbox" id="time_of_day_afternoon" name="time_of_day[]" value="afternoon" $time_of_day_afternoon_checked>
							Afternoon
							<small>(12 p.m. - 5 p.m.)</small>
						</label>
					</div>
					<div class="btn-checkbox" data-toggle="buttons">
						<label for="time_of_day_morning" class="btn btn-default btn-block control-label [[ if time_of_day_evening_checked ]]active[[ end if time_of_day_evening_checked ]]" >
							<span class="glyphicon glyphicon-[[ if location_$id\_checked ]]check[[ end if location_$id\_checked ]][[ if ! location_$id\_checked ]]unchecked[[ end if location_$id\_checked ]] hidden-xs"></span>
							<input type="checkbox" id="time_of_day_evening" name="time_of_day[]" value="evening" $time_of_day_evening_checked>
							Evening
							<small>(5 p.m. - 10 p.m.)</small>
						</label>
					</div>
				</div>
			</div>
			
			[[ if show_date_picker ]]
			<div class="form-group group-ex-date">
				<label class="control-label" for="groupex_search_length_$component_id">View Day or Week</label><br/>
				<div class="btn-group btn-group-justified" data-toggle="buttons">
					$start_loop_filter_times
					<label class="btn btn-default [[ if filter_length_$length\_selected ]]active[[ end if filter_length_$length\_selected ]]">
				    <input type="radio" name="filter_length" id="groupex_search_length_$component_id" value="$length" [[ if filter_length_$length\_selected ]]checked[[ end if filter_length_$length\_selected ]]>
					
					<span class="glyphicon glyphicon-[[ if filter_length_$length\_selected ]]check[[ end if filter_length_$length\_selected ]][[ if ! filter_length_$length\_selected ]]unchecked[[ end if filter_length_$length\_selected ]] hidden-xs">
					</span>

				    $label_esc
				  </label>
					$end_loop_filter_times
				</div>
				[[ if location_mode_user_selectable ]]
				<p class="help-block">
					Selecting more than one location limits your search to one day.
				</p>
				[[ end if location_mode_user_selectable ]]
			</div>
			[[ end if show_date_picker ]]
			
			<div class="form-group">
				<label class="control-label" for="groupex_search_filter_date_$component_id">Start Date</label>
				<div 
					class="input-group date"
					data-date-autoclose="true"
					data-date-today-highlight="true"
					data-provide="datepicker"
					data-date-format="mm/dd/yy"
					data-date-autoclose="true"
					data-date-clear-btn="true"
					>
					<input 
						type="text"
						class="form-control text"
                        placeholder="mm/dd/yy"
						value="$filter_date_esc"
						name="filter_date"
						id="groupex_search_filter_date_$component_id" autocomplete="off">
					<span class="input-group-btn">
						<button class="btn btn-default" type="button">
							<span class="glyphicon glyphicon-calendar"></span>
						</button>
					</span>
				</div>
			</div>
			<div class="form-group">
				<button type="submit" name="groupex_search" id="submit_search_$component_id" class="btn btn-primary btn-lg" >Find Classes</button>
			</div>
		</fieldset>
	</form>
	[[ end if groupex_error ]]
</div>

<!--

	[[ if groupex_searched ]]
	[[ if schedule_results ]]
	$n_results Results:
	<table id="results_table_$component_id" class="results-table" cellpadding="0" cellspacing="0" border="0" >
<thead>
	<tr>
		<th>Time</th>
		<th>Class Name</th>
	</th>
	<th>Studio</th>
	<th>Category</th>
	<th>Length</th>
	<th>Location</th>
</tr>
</thead>
<tbody>
$start_loop_schedule_results
<tr>
	<td colspan="6">
		<h3>$day_esc</h3>
	</td>
</tr>
$start_loop_schedule_day
<tr>
	<td>$start_esc&nbsp;&ndash;&nbsp;$end_esc</td>
	<td>$title_esc</td>
	<td>$studio_esc</td>
	<td>$category_esc</td>
	<td>$length_esc</td>
	<td>$location_esc</td>
</tr>
$end_loop_schedule_day
	$end_loop_schedule_results
</tbody>
</table>
[[ end if schedule_results ]]
[[ end if groupex_searched ]]
-->
<script>
CWjQuery( 
	function() {

		window.c_$component_id\_classname_onchange = function( ) {
			CWjQuery( '#groupex_search_category_$component_id' ).val( 'any');
		}

	}
);

</script>
