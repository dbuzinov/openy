<script type="text/javascript">
<!--
mode = '$mode';
function show_event_detail( event_id, detail_link ) {
	if( detail_link != '' ) {
		window.location = detail_link;
	} else {
		if( mode == 'preview' ) {
			url = '$base_url/cal/display_event_detail.php?event_id=' + event_id;
		} else {
			url = '/mastercal/event_detail/' + event_id + '.html';
		}
		var popup_width=380;
		var popup_height=520;
		var left_edge = screen.availWidth - popup_width - 230;
		popup = window.open( url , "event_detail_popup",
                    "toolbar=yes,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes," 
					+ "width=" + popup_width + ",height=" + popup_height + ",left=" + left_edge);
		popup.focus();
	}
}

-->
</script>
<div class="calgrid">
	<table border="0" align="center" cellpadding="3" cellspacing="0" width="100%">
		<tr>
			<td colspan="3" align="center" class="calnavrow" >
				<a href="$first_page_href" class="calbutton" onClick="$first_page_on_click" >
					|&laquo; first 
				</a>
				&nbsp;
				<a href="$previous_page_href" class="calbutton" onClick="$previous_page_on_click" >
					&laquo; previous
				</a>
				&nbsp;
				$current_page_num - $last_page_num
				</span>
				&nbsp;
				<a href="$next_page_href" class="calbutton" onClick="$next_page_on_click">
					next &raquo;
				</a>
				&nbsp;
				<a href="$last_page_href" class="calbutton" onClick="$last_page_on_click" >
					last &raquo;|
				</a>
			</td>
		</tr>
		
		<tr>
			<td colspan="3" align="center">
				&nbsp;
			</td>
		<tr>
		
		<tr class="cal_header_row">
			<td width="33%" class="event_date">
				<a href="$sort_by_date_href">
					$sort_by_date_indicator Date / Time &nbsp;
				</a>
			</td>
			<td width="33%" class="event_title">
				<a href="$sort_by_title_href">
					$sort_by_title_indicator Event &nbsp;
				</a>
			</td>
			<td width="33%" class="event_location">
				<a href="$sort_by_location_href">
					$sort_by_location_indicator Location &nbsp;
				</a>
			</td>
		</tr>
		
		$start_loop_events
		<tr class="$tr_class">
			<td class="event_date">
				$event_start_time_formatted
			</td>
			<td class="event_title">
				<a href="javascript:show_event_detail('$event_id','$event_detail_link_url_esc_js')">
					$event_title_esc
				</a>
			</td>
			<td class="event_location">
				$event_location
			</td>
		</tr>
		$end_loop_events
		
		<tr>
			<td colspan="3" align="center">
				&nbsp;
			</td>
		<tr>
		
		<tr>
			<td colspan="3" class="calnavrow" align="center">
				<a href="$first_page_href" class="calbutton" onClick="$first_page_on_click" >
					|&laquo; first 
				</a>
				&nbsp;
				<a href="$previous_page_href" class="calbutton" onClick="$previous_page_on_click" >
					&laquo; previous
				</a>
				&nbsp;
				$current_page_num - $last_page_num
				</span>
				&nbsp;
				<a href="$next_page_href" class="calbutton" onClick="$next_page_on_click">
					next &raquo;
				</a>
				&nbsp;
				<a href="$last_page_href" class="calbutton" onClick="$last_page_on_click" >
					last &raquo;|
				</a>
			</td>
		</tr>
		
		<tr>
			<td colspan="3" class="calnavrow" align="right">
				<form method="post">
					<label>Number of Events Per Page</label>
					<select name="$num_per_page_select_name" onChange="javascript: this.form.submit()">
						<option value="10" $num_per_page_selected_10 >10</option>
						<option value="20" $num_per_page_selected_20 >20</option>
						<option value="30" $num_per_page_selected_30 >30</option>
					</select>
				</form>
			</td>
		</tr>
	</table>
</div>
