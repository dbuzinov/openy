{#
/**
 * @file
 *
 * Available variables:
 * - inheirted from 'openy-repeat-schedule-dashboard.html.twig'.
 */
#}

{# date arrows & title #}
<div class="row schedule-dashboard__content--header">
  <div class="col-sm-12 col-md-8">
    <h2>
      <span class="schedule-dashboard__arrow left" role="button"><i class="fa fa-angle-left"></i></span>
      <span class="date"></span>
      <span class="schedule-dashboard__arrow right" role="button"><i class="fa fa-angle-right"></i></span>
    </h2>
  </div>

  <div class="hidden-xs hidden-sm col-md-4">
    <a class="btn btn-md btn-block btn-schedule-pdf hidden">{{ 'View PDF Schedule'|t }} <i class="fa fa-print hidden-xs"></i></a>
  </div>
</div>

{# schedules table data #}
<div id="app">
  <results inline-template :prop-data="globalData.table">
    <div class="vue-template">

      <div class="schedules-data clearfix">

        <div class="schedules-data__header">
          <div>{{ 'Location'|t }}</div>
          <div>{{ 'Class'|t }}</div>
          <div>{{ 'Time'|t }}</div>
          <div class="category-column">{{ 'Category'|t }}</div>
          <div class="instructor-column">{{ 'Instructor'|t }}</div>
          <div></div>
          <div></div>
        </div>

        <div v-for="(item, index) in propData" class="schedules-data__row">

          {# location #}
          <div v-cloak>
            <strong><a class="schedule-dashboard__modal--location-link" role="button" v-on:click="populatePopup(index)" data-toggle="modal" data-target=".schedule-dashboard__modal--location">${ item.location }</a></strong>
          </div>

          {# class #}
          <div v-cloak>
            <strong><a class="schedule-dashboard__modal--class-link" role="button" data-toggle="modal" data-target=".schedule-dashboard__modal--class">${ item.name }</a></strong>
            <p>${ item.room }</p>
          </div>

          {# time #}
          <div v-cloak>
            <strong>${ item.time }</strong>
            <p>
              <span>${ item.duration_hours }{{ 'h'|t }}</span>
              <span v-if="item.duration_minutes > 0">${ item.duration_minutes }{{ 'min'|t }}</span>
              <span v-if="item.room">${ item.room }</span>
            </p>
          </div>

          {# category #}
          <div v-cloak class="category-column">
            ${ item.category }
          </div>

          {# instructor #}
          <div v-cloak class="instructor-column">
            ${ item.instructor }
          </div>

          {# add to calendar #}
          <div v-cloak>
            <span class="addtocalendar">
              <var class="atc_event">
                <var class="atc_date_start">2018-07-06 05:10:00</var>
                <var class="atc_date_end">2018-07-06 06:10:00</var>
                <var class="atc_timezone">America/Chicago</var>
                <var class="atc_title">${ item.name }</var>
                <var class="atc_description">Visit Cardio  with Kristi R.(sub for Tonya R.) Class will take place at Studio 2 -- Prior to your visit, please check this schedule at https://www.ymcamn.org to verify any changes that may have occurred.</var>
                <var class="atc_location">15200 Hanson Boulevard, Andover, MN </var>
                <var class="atc_organizer">Kristi R.&lt;span class="subbed" style="color: #cc0000;"&gt;&lt;br&gt;(sub for Tonya R.)&lt;/span&gt;</var>
              </var>
            </span>
          </div>

          {# register btn #}
          <div v-cloak>
            <a v-bind:href="'/node/' + item.class" class="btn btn-primary">{{ 'Register'|t }}</a>
          </div>
        </div>

        <div class="schedules-empty_results" v-if="propData.length < 1">
          <i class="fa fa-exclamation-circle"></i>
          <span>{{ 'Sorry, no results were found with your search criteria. Please try another selection.'|t }}</span>
        </div>

      </div>
    </div>
  </results>

  {# Modals should be within Vue app block #}

  {# modal > location info  #}
  <div class="modal fade schedule-dashboard__modal schedule-dashboard__modal--location" tabindex="-1" role="dialog" aria-labelledby="schedule-dashboard__modal--location-link">
    <div class="modal-dialog" role="document">
      <div class="modal-content">

        <div class="schedule-dashboard__modal--header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
        </div>

        <div class="schedule-dashboard__modal--body">
          <table class="table">
            <thead>
            <tr>
              <th colspan="2">
                <h4><strong>${ locationPopup.title }</strong></h4>
              </th>
            </tr>
            </thead>

            <tr>
              <td><label>{{ 'Address'|t }}</label></td>
              <td>${ locationPopup.address }</td>
            </tr>
            <tr>
              <td><label>{{ 'Call'|t }}</label></td>
              <td><a v-bind:href="'tel:' + locationPopup.phone">${ locationPopup.phone }</a></td>
            </tr>
            <tr>
              <td><label>{{ 'Email'|t }}</label></td>
              <td><a v-bind:href="'mailto:' + locationPopup.email">${ locationPopup.email }</a></td>
            </tr>
            <tr>
              <td><label>{{ 'Branch hours'|t }}</label></td>
              <td>
                <table class="table" v-for="row in locationPopup.days">
                  <tr>
                    <td>${ row[0] }</td>
                    <td>${ row[1] }</td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>
        </div>

        <div class="schedule-dashboard__modal--footer">
          <a class="btn btn-lg btn-primary" v-bind:href="'node/' + locationPopup.nid">{{ 'Button Text'|t }}</a>
        </div>
      </div>
    </div>
  </div>

  {# modal > class info  #}
  <div class="modal fade schedule-dashboard__modal schedule-dashboard__modal--class" tabindex="-1" role="dialog" aria-labelledby="schedule-dashboard__modal--class-link">
    <div class="modal-dialog" role="document">
      <div class="modal-content">

        <div class="schedule-dashboard__modal--header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
        </div>

        <div class="schedule-dashboard__modal--body">

            {# main data table #}
          <table class="table">
            <thead>
            <tr>
              <th>
                <h4><strong>{{ 'Title'|t }}</strong></h4>
              </th>
            </tr>
            </thead>

            <tbody>
            <tr>
              <td>
                  {#<p>Description text. Nulla quis lorem ut libero malesuada feugiat. Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Mauris blandit aliquet elit, eget tincidunt nibh pulvinar a. Praesent sapien massa, convallis a pellentesque nec, egestas non nisi.</p>#}
              </td>
            </tr>
            </tbody>
          </table>

        </div>

        <div class="schedule-dashboard__modal--footer">
          <button type="button" class="btn btn-lg btn-primary">{{ 'Button Text'|t }}</button>
        </div>

      </div>
    </div>
  </div>

</div>
