{#
/**
 * @file
 *
 * Available variables:
 * - inherits: openy-activity-finder-program-search.html.twig
 */
 *
#}

<div class="activity-finder__step_wrapper">
  <div class="activity-finder__step_header">

    <div class="activity-finder__step_header--progress">
      <div class="container">
        <div class="activity-finder__step_header--progress-inner">
          <div class="d-inline-flex">
            <span v-if="loading">
              {% include '@openy_activity_finder/ajax-spinner.html.twig' with { 'size': 'small', 'flow': 'inline' } %}
            </span>
            <span v-else class="activity-finder__step_header--progress-spacer">
              ${ table.count } {{ 'programs.'|t }}
              <span class="activity-finder__step_header--progress-spacer">|</span>
              <a v-bind:href="afResultsRef + step_1_query">{{ 'View All'|t }}</a>
            </span>
          </div>
          <div class="d-inline-flex ml-auto text-right">
            <a href="#" @click.prevent="startOver()" class="start_over">{{ 'Start Over'|t }}</a>
          </div>
        </div>
      </div>
    </div>

    <div class="activity-finder__step_header--actions container">
      <div class="row">
        <div class="col-xs-8 col-sm-8">
          <span v-if="checkedStep1Filters === ''"><strong>{{ 'Step 1 of 3:' }}</strong> {{ 'To find programs, select whatever options apply to you (below)...'|t }}</span>
          <span v-else><strong>{{ 'Filters:'|t }}</strong> ${ checkedStep1Filters }</span>
        </div>
        <div class="col-xs-4 col-sm-4 text-right ml-auto">
          <button v-bind:disabled="isStep1NextDisabled" @click.prevent="next()" class="btn btn-primary btn-lg btn-disabled">{{ 'Next'|t }}</button>
        </div>
      </div>
    </div>
  </div>

  <div class="activity-finder__step_content container" v-if="!loading">
    <div class="activity-finder__row row">

      {# Age #}
      <div class="activity-finder__col col-sm-4">
        <h3>{{ 'Age'|t }}</h3>

        <div class="row">
          {% for age in ages %}
            <div class="col-sm-6 col-md-4">
              <div class="openy-card__item">
                <label for="af-age-filter-{{ age.value }}" class="justify-content-center">
                  <input v-model="checkedAges" @change="toggleCardState" type="checkbox" value="{{ age.value }}" id="af-age-filter-{{ age.value }}" class="d-none hidden">
                  {{ age.label }}
                </label>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      {# / Age #}

      {# Day #}
      <div class="activity-finder__col col-sm-4">
        <h3>{{ 'Day'|t }}</h3>

        <div class="row">
          {% for day in days %}
            <div class="col-sm-6 col-md-4">
              <div class="openy-card__item">
                <label for="af-day-filter-{{ day.value }}" class="justify-content-center">
                  <input v-model="checkedDays" @change="toggleCardState" type="checkbox" value="{{ day.value }}" id="af-day-filter-{{ day.value }}" class="d-none hidden">
                  {{ day.label }}
                </label>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
      {# Day #}

      {# Program Type #}
      <div class="activity-finder__col col-sm-4">
        <h3>{{ 'Program Type'|t }}</h3>

        <div class="row">
          <div class="col-sm-12" v-for="category in topLevelCategories">
            <div class="openy-card__item">
              <label :for="'af-category-filter-' + category">
                <input v-model="checkedProgramTypes" @change="toggleCardState" type="checkbox" :value="category" :id="'af-category-filter-' + category" class="d-none hidden">
                ${ category }
              </label>
            </div>
          </div>
        </div>
      </div>
      {# / Program Type #}

    </div>
  </div>
</div>
